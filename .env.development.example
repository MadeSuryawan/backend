# .env.development.example
# Development environment configuration for BaliBlissed with Docker and Redis
# Copy this file to secrets/.env for local development

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME="BaliBlissed API"
DEBUG=true

# =============================================================================
# Server Configuration
# =============================================================================
# Server bind address (use 127.0.0.1 for local, 0.0.0.0 for Docker)
HOST=0.0.0.0
PORT=8000
# Logging verbosity: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=DEBUG
# Server-side request timeout in seconds
REQUEST_TIMEOUT=30
# Maximum request body size in MB (prevents DoS attacks)
MAX_REQUEST_SIZE_MB=10

# =============================================================================
# API Documentation
# =============================================================================
# Enable Swagger UI and ReDoc endpoints (set to false in production for security)
DOCS_ENABLED=true

# =============================================================================
# Environment
# =============================================================================
ENVIRONMENT=development
LOG_TO_FILE=true
LOG_FILE=logs/app.log
# Not used in development - only for production CORS validation
PRODUCTION_FRONTEND_URL=

# =============================================================================
# AI Configuration
# =============================================================================
GEMINI_API_KEY="your_development_api_key_here"
AI_REQUEST_TIMEOUT=60
AI_MAX_RETRIES=2
AI_RETRY_DELAY=1.0
AI_BACKOFF_FACTOR=2.0
# Content filtering: none, low, medium, high
AI_SAFETY_THRESHOLD=medium

# =============================================================================
# Database Settings (Development)
# =============================================================================
# Local PostgreSQL (Development)
# Format: postgresql+asyncpg://username:password@host:port/database
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/baliblissed

# Database Debug Settings
DATABASE_ECHO=false

# Database Connection Pool Settings
POOL_SIZE=5
MAX_OVERFLOW=10
POOL_TIMEOUT=30
POOL_RECYCLE=3600

# =============================================================================
# Security Settings (Development)
# =============================================================================
# JWT Configuration
SECRET_KEY="dev-only-insecure-key-replace-in-prod"
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ISSUER=baliblissed-api
JWT_AUDIENCE=baliblissed-client

# Account Lockout Settings
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15

# Email Verification Settings
VERIFICATION_TOKEN_EXPIRE_HOURS=24
VERIFICATION_RESEND_LIMIT=3
FRONTEND_URL=http://localhost:3000

# Password Reset Settings
PASSWORD_RESET_TOKEN_EXPIRE_HOURS=1
PASSWORD_RESET_RESEND_LIMIT=3

# Password Security Level
# Options: development, standard, high, paranoid
PASSWORD_SECURITY_LEVEL=development
PASSWORD_HASHER_DEBUG=false

# Trusted Hosts (for security middleware)
# Comma-separated list of allowed Host header values
TRUSTED_HOSTS="localhost,127.0.0.1,0.0.0.0"

# =============================================================================
# OAuth Configuration
# =============================================================================
# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# WeChat OAuth
WECHAT_APP_ID=
WECHAT_APP_SECRET=

# OAuth State Token Expiration (seconds)
OAUTH_STATE_EXPIRE_SECONDS=600

# =============================================================================
# Gmail API Configuration
# =============================================================================
# Path to the OAuth credentials file downloaded from Google Cloud Console
GMAIL_CLIENT_SECRET_FILE=secrets/client_secret.json
# Path where the authorized user token will be stored
GMAIL_TOKEN_FILE=secrets/token.json
# The email address to send inquiries TO
COMPANY_TARGET_EMAIL=your-email@example.com

# SMTP Configuration (fallback email provider)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=true
SMTP_FROM_EMAIL=
SMTP_FROM_NAME="BaliBlissed"

# =============================================================================
# Redis Configuration (Development)
# =============================================================================
REDIS_ENABLED=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_USERNAME=
REDIS_PASSWORD=
# Alternative: Full Redis URL (overrides individual settings)
REDIS_URL=

# Redis SSL/TLS Configuration (usually disabled in development)
REDIS_SSL=false
REDIS_SSL_CA_CERTS=
REDIS_SSL_CA_PATH=
REDIS_SSL_CERT_REQS=required
REDIS_SSL_CERTFILE=
REDIS_SSL_KEYFILE=
REDIS_SSL_CHECK_HOSTNAME=true

# Rate Limiting
RATE_LIMIT_DEFAULT_LIMITS=100/3600s
IN_MEMORY_FALLBACK_ENABLED=true
HEADERS_ENABLED=true

# =============================================================================
# Storage Configuration
# =============================================================================
# Storage provider: "local" for development, "cloudinary" for production
STORAGE_PROVIDER=local
UPLOADS_DIR=uploads

# Cloudinary Configuration (optional for development)
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=

# =============================================================================
# Profile Picture Settings
# =============================================================================
PROFILE_PICTURE_MAX_SIZE_MB=5
PROFILE_PICTURE_MAX_DIMENSION=1024
PROFILE_PICTURE_QUALITY=85

# =============================================================================
# Media Upload Settings
# =============================================================================
MEDIA_IMAGE_MAX_SIZE_MB=5
MEDIA_IMAGE_MAX_COUNT_REVIEW=5
MEDIA_IMAGE_MAX_COUNT_BLOG=10
MEDIA_VIDEO_MAX_SIZE_MB=50
MEDIA_VIDEO_MAX_COUNT_BLOG=3

# =============================================================================
# Performance Configuration (Development)
# =============================================================================
MAX_CONCURRENT_AI_REQUESTS=5
ENABLE_RESPONSE_CACHING=true
CACHE_TTL_ITINERARY=3600
CACHE_TTL_QUERY=1800
CACHE_TTL_CONTACT=900

# =============================================================================
# Cache Configuration
# =============================================================================
CACHE_DEFAULT_TTL=3600
CACHE_MAX_TTL=86400
CACHE_KEY_PREFIX=cache
CACHE_COMPRESSION_ENABLED=true
CACHE_COMPRESSION_THRESHOLD=1024
CACHE_STRATEGY=LRU
CACHE_ENABLE_STATISTICS=true
CACHE_CLEANUP_INTERVAL=300

# =============================================================================
# Pagination Defaults
# =============================================================================
DEFAULT_PAGE_SIZE=10
MAX_PAGE_SIZE=100

# =============================================================================
# Docker Configuration (Development)
# =============================================================================
BUILD_TARGET=development
BACKEND_PORT=8000
MOUNT_MODE=rw
REDIS_COMMANDER_PORT=8081

# Resource limits for development (lighter)
BACKEND_MEMORY_LIMIT=1G
BACKEND_CPU_LIMIT=1.0
REDIS_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.5

# =============================================================================
# Security Configuration (Development)
# =============================================================================
# Development CORS (explicit localhost origins for security)
CORS_ORIGINS="http://localhost:3000,http://localhost:5173,http://localhost:8000,http://127.0.0.1:3000"

# =============================================================================
# Health Check Configuration
# =============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health

# =============================================================================
# Localization
# =============================================================================
# Timezone for consistent datetime handling (Asia/Singapore for Bali business)
TZ=Asia/Singapore

# =============================================================================
# Monitoring & Error Tracking
# =============================================================================
# Sentry DSN for error tracking (leave empty to disable)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# Development Tools
# =============================================================================
# Enable auto-reload for development
RELOAD=true

# =============================================================================
# Development Notes
# =============================================================================
# 1. Copy this file to secrets/.env: cp .env.development.example secrets/.env
# 2. Update GEMINI_API_KEY with your actual API key
# 3. Update DATABASE_URL with your local PostgreSQL credentials
# 4. Update COMPANY_TARGET_EMAIL with your email for testing
# 5. For OAuth: Update GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET
# 6. For Gmail API: Place client_secret.json in secrets/ folder
# 7. Run: docker-compose up --build
# 8. Access backend: http://localhost:8000
# 9. Access Redis Commander: http://localhost:8081
# 10. API docs: http://localhost:8000/docs
